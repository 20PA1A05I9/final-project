<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Crop Recommendation</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="/">Crop Recommendation</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="contact.html">Contact</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="about.html">About</a>
          </li>
        </ul>
        <!-- <form class="d-flex" role="search">
          <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
          <button class="btn btn-outline-success" type="submit">Search</button>
        </form> -->
      </div>
    </div>
  </nav>
  <script>
    function window1() {
      window.open("https://www.kaggle.com/datasets/siddharthss/crop-recommendation-dataset/data")
    }
    function window2() {
      window.open("http://127.0.0.1:5000/contact.html")
    }
    function window3() {
      window.open("http://127.0.0.1:5000/about.html")
    }
  </script>
</head>
<style>
  h1 {
    color: mediumseagreen;
    text-align: center;
  }

  .warning {
    color: red;
    font-weight: bold;
    text-align: center;
  }

  .container {
    background: #edf2f7;
    font-weight: bold;
    padding-bottom: 10px;
    border-radius: 15px;
  }

  .mobile {
    display: none;
  }

  .content {
    display: none;
  }
  @media only screen and (max-width: 768px) {
    .mobile {
      margin-top: 10px;
      display: inline;
      display: flex;
      justify-content: center;
    }

    .con1 {
      margin-top: 5px;
      display: inline;
      display: flex;
      justify-content: center;
    }

    .container {
      width: auto;
      height: auto;
    }
  }

  .raintemp {
    display: flex;
    justify-content: center;
    margin-bottom: 20px;
  }
  .predict1{
    display:flex;
    justify-content: center;
  }
  .predict{
    background-color: rgb(31, 225, 31);
    border-radius: 6px;
    /* border-color: rgb(10, 15, 10); */
  }
  /* .final{
    display: none;
  } */
</style>

<body>
  <div class="carousel-inner">
    <div class="con1 container my-3 mt-3">
      <h1 class="text-success">Crop Recommendation System <span class="text-success">ðŸŒ±</span></h1>
    </div>
    <div class="carousel-item active">
      <img src="static/main.jpg" class="" style="max-width:100%; height: auto;" alt="pic1 ">
      <div class="carousel-caption d-none d-md-block" style="margin-top: 70px;">
        <h2 class="con">Welcome to our website</h2>
        <h4 class="con">An online userfriendly platform for Crop Recommendation.</h4>
        <div class="btn-group" role="group" aria-label="Basic mixed styles example">
          <button type="button" class="btn btn-danger" onclick="window2()">Contact us</button>
          <button type="button" class="btn btn-warning" onclick="window3()">About us</button>
          <button type="button" class="btn btn-success" onclick="window1()">View Dataset</button>
        </div>
      </div>
    </div>
  </div>
  <div class="mobile">
    <div class="btn-group" role="group" aria-label="Basic mixed styles example">
      <button type="button" class="btn btn-danger" onclick="window2()">Contact us</button>
      <button type="button" class="btn btn-warning" onclick="window3()">About us</button>
      <button type="button" class="btn btn-success" onclick="window1()">View Dataset</button>
    </div>
  </div>
  <form method="POST", action="/predict">
  <div class="container1">
    <div class="album py-5">
      <div class="container 1">

        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
          <div class="col">
            <div class="card shadow-sm ramp">
              <img class="bd-placeholder-img card-img-top img-fluid" width="100% " height="225" src="static/nitrogen (1).png">
              <div class="card-body ">
                <label for="Nitrogen">
                  <p>Nitrogen :<br></p>
                </label>
                <div class="d-flex justify-content-center align-items-center ">
                  <input type="number" id="Nitrogen" name="Nitrogen1" placeholder="Enter Nitrogen" class="form-control Nitrogen">
                </div>
              </div>
            </div>
          </div>
          <div class="col ">
            <div class="card shadow-sm ">
              <img class="bd-placeholder-img card-img-top ramp img-fluid" width="100% " height="225"
                src="https://sustainablepeace.eu/wp-content/uploads/2023/02/image001.png">
              <div class="card-body ">
                <label for="Phosporus">
                  <p>Phosporus :<br></p>
                </label>
                <div class="d-flex justify-content-center align-items-center ">
                  <input type="number" id="Phosporus" step="any" name="Phosporus1" placeholder="Enter Phosporus"
                    class="form-control Phosporus">
                </div>
              </div>
            </div>
          </div>
          <div class="col ">
            <div class="card shadow-sm ">
              <img class="bd-placeholder-img card-img-top ramp img-fluid" width="100% " height="225 "
                src="static/Potassium.jpg">
              <div class="card-body ">
                <label for="Potassium">
                  <p>Pottasium :<br></p>
                </label>
                <div class="d-flex justify-content-center align-items-center ">
                  <input type="number" step="any" id="Potassium" name="Potassium1" placeholder="Enter Potassium"
                    class="form-control Potassium">
                </div>
              </div>
            </div>
          </div>
          <div class="col ">
            <div class="card shadow-sm ">
              <img class="bd-placeholder-img card-img-top r2 img-fluid" width="100% " height="225 "
                src="https://ucarecdn.com/ea94029d-f1df-4ab2-9375-f8d44e5cb09e/-/scale_crop/1280x720/smart/ ">
              <div class="card-body ">
                <label for="Temperature">
                  <p>Temperature :<br></p>
                </label>
                <div class="d-flex justify-content-center align-items-center ">
                  <input type="number" step="any" id="Temperature" name="Temperature1"
                    placeholder="Enter Temperature in Â°C" class="form-control Temperature">
                </div>
              </div>
            </div>
          </div>
          <div class="col ">
            <div class="card shadow-sm ">
              <img class="bd-placeholder-img card-img-top ramp img-fluid" width="100% " height="225 "
                src="https://media.hswstatic.com/eyJidWNrZXQiOiJjb250ZW50Lmhzd3N0YXRpYy5jb20iLCJrZXkiOiJnaWZcL2h1bWlkaXR5LTIuanBnIiwiZWRpdHMiOnsicmVzaXplIjp7IndpZHRoIjo4Mjh9fX0=">
              <div class="card-body ">
                <label for="Humidity">
                  <p>Humidity :<br></p>
                </label>
                <div class="d-flex justify-content-center align-items-center ">
                  <input type="number" step="any" id="Humidity" name="Humidity1" placeholder="Enter Humidity in %"
                    class="form-control Humidity">
                </div>
              </div>
            </div>
          </div>
          <div class="col ">
            <div class="card shadow-sm ">
              <img class="bd-placeholder-img card-img-top ramp img-fluid" width="100% " height="225 " src="static/pH.jpg">
              <div class="card-body ">
                <label for="Ph">
                  <p>pH :<br></p>
                </label>
                <div class="d-flex justify-content-center align-items-center ">
                  <input type="number" step="any" id="Ph" name="Ph1" placeholder="Enter pH value" class="form-control">
                </div>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card shadow-sm ">
              <img class="bd-placeholder-img card-img-top img-fluid" width="100% " height="225 "
                src="https://webneel.com/wallpaper/sites/default/files/images/10-2017/1-rain-wallpaper-drops.jpg">
              <div class="card-body ">
                <label for="Rainfall">
                  <p>Rainfall :<br></p>
                </label>
                <div class="d-flex justify-content-center align-items-center ">
                  <input type="number" step="any" id="Rainfall" name="Rainfall1"
                    placeholder="Enter past 1 month Rainfall in mm" class="form-control Rainfall">
                </div>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card shadow-sm ">
              <img class="bd-placeholder-img card-img-top img-fluid" width="100% " height="225 "
                src="https://www.greenbot.com/wp-content/uploads/2022/07/10-times-when-location-services-will-mess-up-your-life.jpg">
              <div class="card-body ">
                <label for="Latitude">
                  <p>Latitude :<br></p>
                </label>
                <div class="d-flex justify-content-center align-items-center ">
                  <input type="number" step="any" id="Latitude" name="Latitude" placeholder="Enter your location's latitude value"
                    class="form-control Latitude">
                </div>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card shadow-sm ">
              <img class="bd-placeholder-img card-img-top img-fluid" width="100% " height="225 "
                src="https://photos5.appleinsider.com/gallery/57003-115936-IMG_3843-xl.jpg">
              <div class="card-body ">
                <label for="Longitude">
                  <p>Longitude :<br></p>
                </label>
                <div class="d-flex justify-content-center align-items-center ">
                  <input type="number" step="any" id="Longitude" name="Longitude"
                    placeholder="Enter your location's longitude value" class="form-control Longitude">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
  <div class="raintemp">
    <button type="button" class="btn btn-warning" onclick="f2()">Autofill Rainfall,Temperature and Humidity</button>
  </div>
  <div class="predict1">
    <input class="predict"type="submit" value="predict">
  </div>
  </form>
  <div class="mx-5 my-3">
    {% if result %}
    <h2 class="mx-3">{{ result }}</h2>
    {% endif %}
  </div>
    <script>
      var url = 'https://ai-weather-by-meteosource.p.rapidapi.com/weather_statistics?lat=17.685&lon=77.5&units=auto';
var url1;
const a=document.getElementsByClassName("Latitude");
const b=document.getElementsByClassName("Longitude");
const options = {
	method: 'GET',
	headers: {
		'X-RapidAPI-Key': '1d1e96d01dmsh2680ea69f408a9bp1467d3jsn1415b65196bc',
		'X-RapidAPI-Host': 'ai-weather-by-meteosource.p.rapidapi.com'
	}
};
function filler(){
	if(navigator.geolocation){
		navigator.geolocation.getCurrentPosition(getposition)
	}
	else{
		console.log("not available");
	}
}
function getposition(position){
	let i=a[0].value;
	let j=b[0].value;
	if((i==null||i=="")&&(j==null||j=="")){
	a[0].value=position.coords.latitude;
	b[0].value=position.coords.longitude;
	}
	console.log(a[0].value);
  console.log(b[0].value);
	let u=a[0].value;
	let text1=u.toString();
	let v=b[0].value;
	let text2=v.toString();
	url='https://ai-weather-by-meteosource.p.rapidapi.com/weather_statistics?lat='+text1+'&lon='+text2+'&units=auto';
	url1 ='https://weatherapi-com.p.rapidapi.com/current.json?q='+text1+'%2C'+text2;
	bdsd();
	f1();
}
function f2() {
	filler()
}
async function f1() {
	try {
		const response = await fetch(url, options);
		const result = await response.json();
		var temp = 0;
		var rain = 0;
		for (var i = 0; i < 30; i++) {
			temp += result.statistics.data[0].temperature["avg"];
			rain += result.statistics.data[0].precipitation["probability"];
		}
		infusion(temp / 30, rain);
		console.log(temp / 30 + " " + rain);
		console.log(result);
	} catch (error) {
		console.error(error);
	}
}
const c = document.getElementsByClassName("Temperature");
const d = document.getElementsByClassName("Rainfall");
const c1 = document.getElementsByName("Temperature");
const d1 = document.getElementsByName("Rainfall");
function infusion(a, b) {
	c[0].value = a.toFixed(2);
	d[0].value = b.toFixed(2);
	c1[0].value = a.toFixed(2);
	d1[0].value = b.toFixed(2);
}

const options1 = {
	method: 'GET',
	headers: {
		'X-RapidAPI-Key': '1d1e96d01dmsh2680ea69f408a9bp1467d3jsn1415b65196bc',
		'X-RapidAPI-Host': 'weatherapi-com.p.rapidapi.com'
	}
};

async function bdsd(){
try {
	const response = await fetch(url1, options1);
	const result = await response.json();
	const k=document.getElementsByClassName("Humidity");
	k[0].value=result.current.humidity;
	console.log(result.current.humidity)
	console.log(result);
} catch (error) {
	console.error(error);
}
}
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js "
      integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3 "
      crossorigin="anonymous "></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js "
      integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz "
      crossorigin="anonymous "></script>
</body>

</html>
